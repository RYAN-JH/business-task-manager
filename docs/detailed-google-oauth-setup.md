# Google Cloud Console OAuth 설정 상세 가이드

## 1단계: Google Cloud Console 접속 및 프로젝트 생성

### 1.1 Console 접속
1. 브라우저에서 [Google Cloud Console](https://console.cloud.google.com/) 접속
2. Google 계정으로 로그인

### 1.2 새 프로젝트 생성
1. 상단 제목 표시줄에서 **"프로젝트 선택"** 드롭다운 클릭
2. 팝업창에서 **"새 프로젝트"** 버튼 클릭
3. 프로젝트 정보 입력:
   - **프로젝트 이름**: `TaskGenius-Auth` (또는 원하는 이름)
   - **조직**: 개인 계정인 경우 "조직 없음" 선택
   - **위치**: 기본값 그대로
4. **"만들기"** 버튼 클릭
5. 프로젝트 생성 완료까지 1-2분 대기

## 2단계: API 및 서비스 활성화

### 2.1 Google+ API 활성화 (필요한 경우)
1. 좌측 메뉴에서 **"API 및 서비스"** > **"라이브러리"** 클릭
2. 검색창에 "Google+ API" 또는 "People API" 검색
3. **"People API"** 선택 후 **"사용"** 버튼 클릭

## 3단계: OAuth 동의 화면 설정

### 3.1 동의 화면 기본 설정
1. 좌측 메뉴에서 **"API 및 서비스"** > **"OAuth 동의 화면"** 클릭
2. **사용자 유형** 선택:
   - **"외부"** 선택 (개인 개발자는 이 옵션만 가능)
   - **"만들기"** 버튼 클릭

### 3.2 앱 정보 입력
**OAuth 동의 화면** 탭에서:
1. **앱 이름**: `TaskGenius` 입력
2. **사용자 지원 이메일**: 본인 이메일 주소 선택
3. **앱 로고** (선택사항): 로고 이미지 업로드 (생략 가능)
4. **앱 도메인** (선택사항):
   - 애플리케이션 홈페이지: `http://localhost:3000` (개발용)
   - 개인정보처리방침: 생략 가능
   - 서비스 약관: 생략 가능
5. **승인된 도메인**: 생략 (개발 단계에서는 불필요)
6. **개발자 연락처 정보**: 본인 이메일 주소 입력
7. **"저장 후 계속"** 클릭

### 3.3 범위 설정
**범위** 탭에서:
1. **"범위 추가 또는 삭제"** 클릭 (선택사항)
2. 기본 범위 그대로 사용 (추가 설정 불필요)
3. **"저장 후 계속"** 클릭

### 3.4 테스트 사용자 추가
**테스트 사용자** 탭에서:
1. **"테스트 사용자 추가"** 클릭
2. 본인 이메일 주소 입력
3. **"추가"** 버튼 클릭
4. **"저장 후 계속"** 클릭

## 4단계: OAuth 클라이언트 ID 생성

### 4.1 사용자 인증 정보 생성
1. 좌측 메뉴에서 **"API 및 서비스"** > **"사용자 인증 정보"** 클릭
2. 상단의 **"+ 사용자 인증 정보 만들기"** 클릭
3. **"OAuth 클라이언트 ID"** 선택

### 4.2 애플리케이션 유형 선택
1. **애플리케이션 유형**: **"웹 애플리케이션"** 선택
2. **이름**: `TaskGenius Web Client` 입력

### 4.3 승인된 리디렉션 URI 설정
**승인된 JavaScript 출처** 섹션에서:
1. **"URI 추가"** 클릭
2. 다음 URI들을 하나씩 추가:
   ```
   http://localhost:3000
   http://localhost:3001
   ```

**승인된 리디렉션 URI** 섹션에서:
1. **"URI 추가"** 클릭
2. 다음 URI들을 하나씩 추가:
   ```
   http://localhost:3000/api/auth/callback/google
   http://localhost:3001/api/auth/callback/google
   ```

### 4.4 클라이언트 생성 완료
1. **"만들기"** 버튼 클릭
2. 팝업창에서 **클라이언트 ID**와 **클라이언트 보안 비밀번호** 표시됨
3. **각각 복사해서 안전한 곳에 저장**
4. **"확인"** 클릭

## 5단계: 환경 변수 설정

### 5.1 .env.local 파일 수정
복사한 값들을 사용하여 `.env.local` 파일 업데이트:

```bash
# Google OAuth (실제 값으로 교체)
GOOGLE_CLIENT_ID=복사한_클라이언트_ID
GOOGLE_CLIENT_SECRET=복사한_클라이언트_보안_비밀번호
```

### 5.2 설정 확인
터미널에서 설정 확인:
```bash
npm run check:oauth
```

## 6단계: 테스트

### 6.1 개발 서버 재시작
```bash
npm run dev
```

### 6.2 로그인 테스트
1. 브라우저에서 `http://localhost:3000/auth/signin` 접속
2. **"Google로 계속하기"** 버튼 클릭
3. Google 로그인 화면에서 계정 선택
4. 앱 권한 동의 (처음에만)
5. 로그인 성공 후 리디렉션 확인

## 문제 해결

### 자주 발생하는 오류와 해결방법

1. **"redirect_uri_mismatch" 오류**
   - 리디렉션 URI가 정확히 일치하는지 확인
   - 슬래시(/) 누락 여부 확인

2. **"invalid_client" 오류**
   - 클라이언트 ID와 시크릿이 정확한지 확인
   - .env.local 파일의 공백이나 따옴표 확인

3. **"access_denied" 오류**
   - 테스트 사용자에 이메일이 추가되었는지 확인
   - OAuth 동의 화면이 완료되었는지 확인

## 프로덕션 배포 시 추가 설정

배포 시 실제 도메인으로 다음 URI들 추가:
```
승인된 JavaScript 출처:
https://yourdomain.com

승인된 리디렉션 URI:
https://yourdomain.com/api/auth/callback/google
```